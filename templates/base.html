<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="{% if user %}logged-in{% endif %}">
    <nav class="topbar container">
        {% if request.url.path != '/' %}
            <a href="/" class="logo">ğŸ  ÙØ±ÙˆØ´Ú¯Ø§Ù‡</a>
        {% endif %}
        {% if user %}
            <a href="/profile" class="user-link">{{ user.fname }} {{ user.lname }}</a>
        <a href="/profile/orders">Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</a>

            <a href="/logout">Ø®Ø±ÙˆØ¬</a>
        {% else %}
            <a href="#" id="navLogin">ÙˆØ±ÙˆØ¯</a>
            <a href="#" id="navRegister">Ø«Ø¨Øª Ù†Ø§Ù…</a>

        {% endif %}
        {% if user and user.is_admin %}
            <a href="/admin/users">Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</a>
        <a href="/admin/orders">Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø³ÙØ§Ø±Ø´</a>

        {% endif %}

        {% if user and (user.is_seller or user.is_admin) %}
        <a href="/seller/products">Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…Ù†</a>
        <a href="/seller/stats">Ø¢Ù…Ø§Ø± ÙØ±ÙˆØ´</a>

        {% endif %}


    </nav>

    {% block content %}{% endblock %}
    {% if cart_count is defined and cart_count > 0 %}
<a href="/cart" class="cart-fab">
    ğŸ›’ <span class="badge">{{ cart_count }}</span>
</a>
{% endif %}

<div id="toast" class="toast"></div>
<!-- ==== Login / Register Modal ==== -->
<div id="authOverlay" class="modal-overlay">
  <div class="modal">
    <button class="close-btn" id="closeAuth">âœ–</button>

    <div id="loginPane">
      <h2>ÙˆØ±ÙˆØ¯</h2>
      <form id="loginForm" method="post" action="/login">
        <input name="email" type="email" placeholder="Ø§ÛŒÙ…ÛŒÙ„" required>
        <input name="password" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" required>
        <button type="submit">ÙˆØ±ÙˆØ¯</button>
        <p class="switcher">Ø­Ø³Ø§Ø¨ Ù†Ø¯Ø§Ø±ÛŒØŸ <a href="#" id="showReg">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</a></p>
      </form>
    </div>

    <div id="regPane" style="display:none;">
      <h2>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h2>
      <form id="regForm" method="post" action="/register">
        <input name="fname" placeholder="Ù†Ø§Ù…">
        <input name="lname" placeholder="Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
        <input name="email" type="email" placeholder="Ø§ÛŒÙ…ÛŒÙ„" required>
        <input name="password" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" required>
        <button type="submit">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
        <p class="switcher">Ø­Ø³Ø§Ø¨ Ø¯Ø§Ø±ÛŒØŸ <a href="#" id="showLogin">ÙˆØ±ÙˆØ¯</a></p>
      </form>
    </div>
  </div>
</div>
<!-- ==== Confirm Modal ==== -->
<div id="confirmOverlay" class="modal-overlay">
  <div class="modal">
    <p id="confirmMsg" style="margin:0 0 1.2rem;text-align:center;"></p>
    <div style="display:flex;gap:.8rem;justify-content:center;">
      <button id="confirmYes" class="profile-btn">ØªØ£ÛŒÛŒØ¯</button>
      <button id="confirmNo"  class="profile-btn" style="background:var(--secondary);">Ù„ØºÙˆ</button>
    </div>
  </div>
</div>
<!-- ==== Qty Modal ==== -->
<div id="qtyOverlay" class="modal-overlay">
  <div class="modal">
    <p id="qtyMsg" style="text-align:center;margin:0 0 1rem;"></p>
    <input id="qtyInput" type="number" value="1" min="1"
           style="width:100%;padding:.5rem;border:1px solid #ddd;border-radius:var(--radius);margin-bottom:1rem;">
    <div style="display:flex;gap:.8rem;justify-content:center;">
      <button id="qtyYes" class="profile-btn">ØªØ£ÛŒÛŒØ¯</button>
      <button id="qtyNo"  class="profile-btn" style="background:var(--secondary);">Ù„ØºÙˆ</button>
    </div>
  </div>
</div>

    <script src="/static/app.js"></script>
</body>
</html>
